<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href="{{ .Site.Params.favicon | default "/fav.png" }}" type="image/gif">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>

<!-- font configuration -->
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/css/font.css" media="all">

<!-- Internal templates -->
{{ template "_internal/google_analytics.html" . }}
{{ template "_internal/opengraph.html" . }}
{{ template "_internal/twitter_cards.html" . }}

<!-- stylesheets -->
{{- if (or (eq .Site.Params.UseBootstrapCDN true) (eq .Site.Params.UseBootstrapCDN "css")) -}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
{{- else -}}
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/bootstrap-5/css/bootstrap.min.css" media="all">
{{- end -}}
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/css/header.css" media="all">
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/css/footer.css" media="all">

<!-- theme -->
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/css/theme.css" media="all">

{{ $color := .Site.Params.color }}
{{ if .Site.Language.Params.color }}{{ $color = .Site.Language.Params.color }}{{ end }}
{{ $font := .Site.Params.font }}
{{ if .Site.Language.Params.font }}{{ $font = .Site.Language.Params.font }}{{ end }}
{{ $navbar := .Site.Params.navbar }}
{{ if .Site.Language.Params.navbar }}{{ $navbar = .Site.Language.Params.navbar }}{{ end }}

<!-- Theme data for runtime CSS variables (JSON encoded to avoid template tokens inside CSS/JS) -->
<meta id="site-theme-data" data-color='{{ $color | jsonify }}' data-font='{{ $font | jsonify }}' data-sticky-nav='{{ ($navbar.stickyNavBar.enable | default false) | jsonify }}'>

<script>
    // Read theme data and set CSS variables and body font styles at runtime.
    (function() {
        try {
            var meta = document.getElementById('site-theme-data');
            if (!meta) return;
            var color = {};
            var font = {};
            try { color = JSON.parse(meta.dataset.color || '{}'); } catch (e) { color = {}; }
            try { font = JSON.parse(meta.dataset.font || '{}'); } catch (e) { font = {}; }
            var root = document.documentElement;
            root.style.setProperty('--text-color', color.textColor || '#343a40');
            root.style.setProperty('--text-secondary-color', color.secondaryTextColor || '#6c757d');
            root.style.setProperty('--text-link-color', color.textLinkColor || (color.primaryColor || '#007bff'));
            root.style.setProperty('--background-color', color.backgroundColor || '#eaedf0');
            root.style.setProperty('--secondary-background-color', color.secondaryBackgroundColor || '#64ffda1a');
            root.style.setProperty('--primary-color', color.primaryColor || '#007bff');
            root.style.setProperty('--secondary-color', color.secondaryColor || '#f8f9fa');

            // dark mode
            root.style.setProperty('--text-color-dark', (color.darkmode && color.darkmode.textColor) || '#e4e6eb');
            root.style.setProperty('--text-secondary-color-dark', (color.darkmode && color.darkmode.secondaryTextColor) || '#b0b3b8');
            root.style.setProperty('--text-link-color-dark', (color.darkmode && color.darkmode.textLinkColor) || ((color.darkmode && color.darkmode.primaryColor) || '#ffffff'));
            root.style.setProperty('--background-color-dark', (color.darkmode && color.darkmode.backgroundColor) || '#18191a');
            root.style.setProperty('--secondary-background-color-dark', (color.darkmode && color.darkmode.secondaryBackgroundColor) || '#212529');
            root.style.setProperty('--primary-color-dark', (color.darkmode && color.darkmode.primaryColor) || '#ffffff');
            root.style.setProperty('--secondary-color-dark', (color.darkmode && color.darkmode.secondaryColor) || '#212529');

            // apply body font styles
            var body = document.body;
            if (body) {
                body.style.fontSize = font.fontSize || '1rem';
                body.style.fontWeight = font.fontWeight || '400';
                body.style.lineHeight = font.lineHeight || '1.5';
                body.style.textAlign = font.textAlign || 'left';
            }
        } catch (e) { /* ignore */ }
    })();
</script>

{{ partial "head/extensions.html" . }}
